import { BodyText, SubheaderText } from 'components/Text'
import { classnames, display, flexDirection, space } from 'classnames/tailwind'
import { useSnapshot } from 'valtio'
import ContractListContainer from 'components/ContractListContainer'
import ContractName from 'components/ContractName'
import React from 'react'
import proofStore from 'stores/ProofStore'

const contractContainer = classnames(
  display('flex'),
  flexDirection('flex-row'),
  space('space-x-2')
)

function ContractList() {
  const { proofsReady } = useSnapshot(proofStore)

  return (
    <>
      {proofsReady?.length ? (
        <ContractListContainer>
          {proofsReady.map((proof) => (
            <div className={contractContainer}>
              <ContractName address={proof.contract} />
            </div>
          ))}
        </ContractListContainer>
      ) : (
        <SubheaderText>You don't have any generated proofs yet.</SubheaderText>
      )}
    </>
  )
}

export default function ListOfReadyZKProofs() {
  return (
    <React.Suspense
      fallback={<BodyText>Fetching ready proofs generated by you...</BodyText>}
    >
      <ContractList />
    </React.Suspense>
  )
}
